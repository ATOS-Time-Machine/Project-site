---
layout: base
---
<div>
    <div class="row">
    <div class="col s12 m9 l10">
      <div id="introduction" class="section scrollspy">
        All AJAX requests made using this API should be using the address <site address>/api/<function handler> where function handler is different per function, as shown further on.
<h3>Generating a token (General User)</h3>
To generate a token you have to make use of the /login POST request which is written as follows:
<pre class="prettyprint">
app.post("/login", function (req, res) {
    console.log("Logging in");
    var query = "SELECT Password FROM Users WHERE StaffID=?;";
    connection.query(query, [req.body.log_id],function (error, results) {
        if (error) {
            throw error;
        } else {
            if (req.body.log_password === "111") {
                res.json({
                    success: (req.body.log_password === results[0].Password),
                    token: req.body.log_id
                });
            } else {
                console.log(results[0].Password);
                res.json({
                    success: bcrypt.compareSync(req.body.log_password, results[0].Password),
                    token: req.body.log_id
                });
            }
        }
    });
});
</pre>
A POST request to /login requires the following information in the described JSON:
<pre class="prettyprint">
{
    log_id: log_id,
    log_password: log_password
}
</pre>
If the information provided is valid then the message returned will contain the following in the described JSON:
<pre class="prettyprint">{
  success: (true/false),
  token: (token value)
}
</pre>
This token will be necessary to use any of the other functions listed, and depending on the credentials used to generate the token, some function may still be off limits.

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sed ullamcorper velit, luctus bibendum risus. Praesent efficitur placerat ornare. Aenean id tellus sed nulla eleifend aliquet at in urna. Praesent porttitor semper libero ut efficitur. Suspendisse laoreet ex a odio accumsan, vel dapibus urna imperdiet. Phasellus ante massa, porttitor at ipsum eget, cursus mollis erat. Integer pharetra ornare ex, quis imperdiet erat dignissim ac. Ut volutpat, dui eget volutpat tincidunt, elit magna scelerisque tellus, at elementum lacus urna eget neque. Sed pharetra odio id eros scelerisque finibus. Aliquam nec nibh dictum, laoreet purus vel, viverra risus. Cras sagittis ac metus quis efficitur. Quisque dictum eget mauris sit amet congue. Phasellus vel tortor finibus, sodales nunc a, laoreet augue. Suspendisse aliquet purus a justo congue, suscipit pharetra orci iaculis.</p>
      </div>

      <div id="structure" class="section scrollspy">
        <a href="test.html">Link testing</a>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sed ullamcorper velit, luctus bibendum risus. Praesent efficitur placerat ornare. Aenean id tellus sed nulla eleifend aliquet at in urna. Praesent porttitor semper libero ut efficitur. Suspendisse laoreet ex a odio accumsan, vel dapibus urna imperdiet. Phasellus ante massa, porttitor at ipsum eget, cursus mollis erat. Integer pharetra ornare ex, quis imperdiet erat dignissim ac. Ut volutpat, dui eget volutpat tincidunt, elit magna scelerisque tellus, at elementum lacus urna eget neque. Sed pharetra odio id eros scelerisque finibus. Aliquam nec nibh dictum, laoreet purus vel, viverra risus. Cras sagittis ac metus quis efficitur. Quisque dictum eget mauris sit amet congue. Phasellus vel tortor finibus, sodales nunc a, laoreet augue. Suspendisse aliquet purus a justo congue, suscipit pharetra orci iaculis.</p>
      </div>

      <div id="initialization" class="section scrollspy">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sed ullamcorper velit, luctus bibendum risus. Praesent efficitur placerat ornare. Aenean id tellus sed nulla eleifend aliquet at in urna. Praesent porttitor semper libero ut efficitur. Suspendisse laoreet ex a odio accumsan, vel dapibus urna imperdiet. Phasellus ante massa, porttitor at ipsum eget, cursus mollis erat. Integer pharetra ornare ex, quis imperdiet erat dignissim ac. Ut volutpat, dui eget volutpat tincidunt, elit magna scelerisque tellus, at elementum lacus urna eget neque. Sed pharetra odio id eros scelerisque finibus. Aliquam nec nibh dictum, laoreet purus vel, viverra risus. Cras sagittis ac metus quis efficitur. Quisque dictum eget mauris sit amet congue. Phasellus vel tortor finibus, sodales nunc a, laoreet augue. Suspendisse aliquet purus a justo congue, suscipit pharetra orci iaculis.</p>
      </div>
    </div>
    {% include contents_table.html %}
  </div>
</div>